{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/benjaminshiao/Desktop/react/trade-analyzer/src/components/Balance.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport * as d3 from \"d3\";\nimport Chart from \"../components/chart-components/Chart\";\nimport { GlobalContext } from '../context/GlobalState';\nimport \"../chart.css\";\nexport const Balance = () => {\n  _s();\n\n  //grab global variables/functions to call in this file\n  const {\n    transactions,\n    graphData_AV_API\n  } = useContext(GlobalContext);\n  const amounts = transactions.map(transaction => transaction.amount);\n  const total = amounts.reduce((acc, item) => acc += item, 0).toFixed(2); //temp graph d3 example--------------------------\n\n  const chart_width = window.screen.availWidth * 2 / 3;\n  const chart_height = window.screen.availHeight * 2 / 3;\n  let xAxis_times = [];\n  let graphDataProcessed = []; // const randomOne = (weight = 1) => {\n  //   return (Math.random() + Math.random() - 1) * weight;\n  // };\n  // const generateData = () => {\n  //   const length = Math.round(Math.random() * 90) + 10;\n  //   // initial values\n  //   const seed_close = Math.random() * 150 + 50;\n  //   let previous_close = seed_close;\n  //   let previous_volume = Math.random() * 300 + 10;\n  //   let trend = Math.floor(Math.random() * 2) * 2 - 1;\n  //   // calculate each bar\n  //   return d3.range(length).map((item, i) => {\n  //     const open = previous_close * (1 + randomOne(0.1));\n  //     const close = open * (1 + randomOne(0.2) * trend);\n  //     const high = Math.max(open, close) * (1 + randomOne(0.1));\n  //     const low = Math.min(open, close) * (1 - randomOne(0.1));\n  //     const volume = previous_volume * (1 + randomOne(0.5));\n  //     previous_close = close;\n  //     trend = Math.floor(Math.random() * 2) * 2 - 1;\n  //     return {\n  //       time: i,\n  //       open,\n  //       high,\n  //       low,\n  //       close,\n  //       volume\n  //     };\n  //   });\n  // };\n\n  const processGraphData = () => {\n    //currently default, daily, compact(100)\n    let split_ratio = 1.0;\n\n    for (let myDate in graphData_AV_API['Time Series (Daily)']) {\n      xAxis_times.push(myDate);\n      graphDataProcessed.push({\n        \"open\": +graphData_AV_API['Time Series (Daily)'][myDate]['1. open'] / split_ratio,\n        \"close\": +graphData_AV_API['Time Series (Daily)'][myDate]['4. close'] / split_ratio,\n        \"high\": +graphData_AV_API['Time Series (Daily)'][myDate]['2. high'] / split_ratio,\n        \"low\": +graphData_AV_API['Time Series (Daily)'][myDate]['3. low'] / split_ratio,\n        \"volume\": +graphData_AV_API['Time Series (Daily)'][myDate]['6. volume']\n      });\n      split_ratio *= +graphData_AV_API['Time Series (Daily)'][myDate]['8. split coefficient'];\n    } // console.log(data['Meta Data']['2. Symbol']);\n    // console.log(data['Time Series (Daily)']);\n    // for(let x in data['Time Series (Daily)']){\n    //   console.log(x,data['Time Series (Daily)'][x]);\n    // }\n\n\n    const length = xAxis_times.length; // calculate each bar\n\n    return d3.range(length).map((item, i) => {\n      console.log(\"processing\");\n      return {\n        time: i,\n        open: graphDataProcessed[i]['open'],\n        high: graphDataProcessed[i]['high'],\n        low: graphDataProcessed[i]['low'],\n        close: graphDataProcessed[i]['close'],\n        volume: graphDataProcessed[i]['volume']\n      };\n    });\n  }; //const data_temp = generateData()\n  //console.log(data_temp[1]['open']);\n  // const data_real = processGraphData();\n  // const [data] = useState(data_real);\n  //if(data_real) console.log(data_real[1]['open']);\n\n\n  const [data, setData] = useState(() => processGraphData());\n  useEffect(() => {\n    setData(processGraphData());\n  }, [graphData_AV_API]);\n  console.log(\"raw d\", data);\n  console.log(\"gdp\", graphDataProcessed); // const changeData = () => {\n  //   setData(processGraphData());\n  // };\n  //candlestick tutorial end-----\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Your Balance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Chart, {\n      data: data,\n      width: chart_width,\n      height: chart_height\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"$\", total]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Balance, \"/ZihTlXhdYEcycIE2QjA5Sm9qTc=\");\n\n_c = Balance;\n\nvar _c;\n\n$RefreshReg$(_c, \"Balance\");","map":{"version":3,"sources":["/Users/benjaminshiao/Desktop/react/trade-analyzer/src/components/Balance.js"],"names":["React","useContext","useEffect","useState","d3","Chart","GlobalContext","Balance","transactions","graphData_AV_API","amounts","map","transaction","amount","total","reduce","acc","item","toFixed","chart_width","window","screen","availWidth","chart_height","availHeight","xAxis_times","graphDataProcessed","processGraphData","split_ratio","myDate","push","length","range","i","console","log","time","open","high","low","close","volume","data","setData"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport * as d3 from \"d3\";\nimport Chart from \"../components/chart-components/Chart\";\n\nimport { GlobalContext } from '../context/GlobalState';\nimport \"../chart.css\";\n\n\nexport const Balance = () => {\n  //grab global variables/functions to call in this file\n  const { transactions, graphData_AV_API } = useContext(GlobalContext);\n\n  const amounts = transactions.map(transaction => transaction.amount);\n\n  const total = amounts.reduce((acc, item) => (acc += item), 0).toFixed(2);\n\n  //temp graph d3 example--------------------------\n  const chart_width = window.screen.availWidth*2/3;\n  const chart_height = window.screen.availHeight*2/3;\n\n  let xAxis_times = [];\n  let graphDataProcessed = [];\n\n  // const randomOne = (weight = 1) => {\n  //   return (Math.random() + Math.random() - 1) * weight;\n  // };\n  // const generateData = () => {\n  //   const length = Math.round(Math.random() * 90) + 10;\n\n  //   // initial values\n  //   const seed_close = Math.random() * 150 + 50;\n  //   let previous_close = seed_close;\n  //   let previous_volume = Math.random() * 300 + 10;\n  //   let trend = Math.floor(Math.random() * 2) * 2 - 1;\n\n  //   // calculate each bar\n  //   return d3.range(length).map((item, i) => {\n  //     const open = previous_close * (1 + randomOne(0.1));\n  //     const close = open * (1 + randomOne(0.2) * trend);\n  //     const high = Math.max(open, close) * (1 + randomOne(0.1));\n  //     const low = Math.min(open, close) * (1 - randomOne(0.1));\n  //     const volume = previous_volume * (1 + randomOne(0.5));\n\n  //     previous_close = close;\n  //     trend = Math.floor(Math.random() * 2) * 2 - 1;\n\n  //     return {\n  //       time: i,\n  //       open,\n  //       high,\n  //       low,\n  //       close,\n  //       volume\n  //     };\n  //   });\n  // };\n\n  const processGraphData = () => {//currently default, daily, compact(100)\n    let split_ratio = 1.0;\n\n    for(let myDate in graphData_AV_API['Time Series (Daily)']){\n      xAxis_times.push(myDate);\n      graphDataProcessed.push({\n        \"open\": +graphData_AV_API['Time Series (Daily)'][myDate]['1. open']/split_ratio,\n        \"close\": +graphData_AV_API['Time Series (Daily)'][myDate]['4. close']/split_ratio,\n        \"high\": +graphData_AV_API['Time Series (Daily)'][myDate]['2. high']/split_ratio,\n        \"low\": +graphData_AV_API['Time Series (Daily)'][myDate]['3. low']/split_ratio,\n        \"volume\": +graphData_AV_API['Time Series (Daily)'][myDate]['6. volume']\n      });\n      split_ratio *= +graphData_AV_API['Time Series (Daily)'][myDate]['8. split coefficient'];\n    }\n     // console.log(data['Meta Data']['2. Symbol']);\n    // console.log(data['Time Series (Daily)']);\n    // for(let x in data['Time Series (Daily)']){\n    //   console.log(x,data['Time Series (Daily)'][x]);\n    // }\n    \n    const length = xAxis_times.length;\n    // calculate each bar\n    return d3.range(length).map((item, i) => {\n      console.log(\"processing\");\n      return {\n        time: i,\n        open: graphDataProcessed[i]['open'],\n        high: graphDataProcessed[i]['high'],\n        low: graphDataProcessed[i]['low'],\n        close: graphDataProcessed[i]['close'],\n        volume: graphDataProcessed[i]['volume']\n      };\n    });\n  };\n  \n  //const data_temp = generateData()\n  //console.log(data_temp[1]['open']);\n  // const data_real = processGraphData();\n  // const [data] = useState(data_real);\n  //if(data_real) console.log(data_real[1]['open']);\n  const [data, setData] = useState(() => processGraphData());\n  useEffect(() => {\n    setData(processGraphData());\n  }, [graphData_AV_API]);\n  console.log(\"raw d\", data);\n  console.log(\"gdp\", graphDataProcessed);\n  // const changeData = () => {\n  //   setData(processGraphData());\n  // };\n\n  //candlestick tutorial end-----\n\n\n  return (\n    <>\n      <h4>Your Balance</h4>\n\n      <Chart data={data} width={chart_width} height={chart_height} />\n      <h1>${total}</h1>\n    </>\n  )\n}\n\n\n"]},"metadata":{},"sourceType":"module"}