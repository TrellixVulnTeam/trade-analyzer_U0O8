(this["webpackJsonptrade-analyzer-react"]=this["webpackJsonptrade-analyzer-react"]||[]).push([[0],{34:function(e,n,t){},35:function(e,n,t){},36:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t(1),c=t(19),s=t.n(c),i=t(3),l=t(2),o=t(4),d=t(12),u=t(5),b=t.n(u),p=t(7),h=t(6),j=function(e,n){switch(n.type){case"DELETE_BACKTEST":return Object(h.a)(Object(h.a)({},e),{},{backtests:e.backtests.filter((function(e){return e.id!==n.payload}))});case"ADD_BACKTEST":return Object(h.a)(Object(h.a)({},e),{},{backtests:[n.payload].concat(Object(d.a)(e.backtests))});case"STOCK_SEARCH":return Object(h.a)(Object(h.a)({},e),{},{graphData_AV_API:e.graphData_AV_API,symbol_list:n.payload,current_symbol:e.current_symbol});case"MAX_API":return Object(h.a)({},e);case"FILL_CACHE_TSDA":return Object(h.a)(Object(h.a)({},e),{},{cache_TSDA:n.payload["Time Series (Daily)"]?n.payload:e.cache_TSDA});case"DISPLAY_GRAPHS":return Object(h.a)(Object(h.a)({},e),{},{graphData_AV_API:n.payload[1],symbol_list:[],current_symbol:n.payload[1]["Meta Data"]["2. Symbol"],current_company:n.payload[2],cache_TSDA:n.payload[1]["Time Series (Daily)"]?n.payload[1]:e.cache_TSDA,cache_TS15min:n.payload[1]["Time Series (15min)"]?n.payload[1]:e.cache_TS15min,cache_TS60min:n.payload[1]["Time Series (60min)"]?n.payload[1]:e.cache_TS60min,graph_type:n.payload[0]});default:return e}},m={backtests:[],symbol_list:[],graphData_AV_API:{},current_symbol:"",current_company:"",graph_type:"",cache_TSDA:{},cache_TS15min:{},cache_TS60min:{}},x=Object(r.createContext)(m),f=function(e){var n=e.children,t=Object(r.useReducer)(j,m),c=Object(l.a)(t,2),s=c[0],i=c[1];function o(){return(o=Object(p.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.Note?(alert("MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day."),i({type:"MAX_API",payload:n})):i({type:"FILL_CACHE_TSDA",payload:n});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(p.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:"STOCK_SEARCH",payload:[]});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(p.a)(b.a.mark((function e(n){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(n.text,"&apikey=CQ5JZQYM4DG0OODA"));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,r=[],a.Note?(alert("MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day."),i({type:"MAX_API",payload:r})):(Object.keys(a.bestMatches).forEach((function(e){if("United States"===a.bestMatches[e]["4. region"]){var n={symbol:a.bestMatches[e]["1. symbol"],name:a.bestMatches[e]["2. name"]};r=[n].concat(Object(d.a)(r))}})),r.reverse(),i({type:"STOCK_SEARCH",payload:r}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(p.a)(b.a.mark((function e(n,t,a,r){var c,l,o,d,u,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&(s.cache_TSDA={},s.cache_TS15min={},s.cache_TS60min={}),o="",d=!1,e.t0=a,e.next="day"===e.t0?6:"week"===e.t0?8:10;break;case 6:return s.cache_TS15min["Time Series (15min)"]?(d=!0,u=s.cache_TS15min):(c="TIME_SERIES_INTRADAY",o="&interval=15min",l="compact"),e.abrupt("break",11);case 8:return s.cache_TS60min["Time Series (60min)"]?(d=!0,u=s.cache_TS60min):(c="TIME_SERIES_INTRADAY",o="&interval=60min",l="compact"),e.abrupt("break",11);case 10:s.cache_TSDA["Time Series (Daily)"]?(d=!0,u=s.cache_TSDA):(c="TIME_SERIES_DAILY_ADJUSTED",l="full");case 11:if(d){e.next=18;break}return e.next=14,fetch("https://www.alphavantage.co/query?function=".concat(c,"&symbol=").concat(n).concat(o,"&outputsize=").concat(l,"&apikey=CQ5JZQYM4DG0OODA"));case 14:return p=e.sent,e.next=17,p.json();case 17:u=e.sent;case 18:u.Note?(alert("MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day."),i({type:"MAX_API",payload:[a,u]})):u["Error Message"]?(alert("ERROR. This stock does not have valid data in the Alpha Vantage database."),i({type:"MAX_API",payload:[a,u]})):i({type:"DISPLAY_GRAPHS",payload:[a,u,t]});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsx)(x.Provider,{value:{backtests:s.backtests,symbol_list:s.symbol_list,graphData_AV_API:s.graphData_AV_API,current_symbol:s.current_symbol,current_company:s.current_company,cache_TSDA:s.cache_TSDA,cache_TS15min:s.cache_TS15min,cache_TS60min:s.cache_TS60min,graph_type:s.graph_type,deleteBacktest:function(e){i({type:"DELETE_BACKTEST",payload:e})},addBacktest:function(e){i({type:"ADD_BACKTEST",payload:e})},clearSearch:function(e){return u.apply(this,arguments)},stockSearch:function(e){return h.apply(this,arguments)},graphSymbol:function(e,n,t,a){return f.apply(this,arguments)},cache_TSDA_function:function(e){return o.apply(this,arguments)}},children:n})};function g(){var e=Object(i.a)(["\n  width: fit;\n  background: transparent;\n\n  .search-item{\n    width:100%;\n    @media only screen and (max-width: 768px) {\n      width: 200%;\n    }\n    border:none;\n\n    border-bottom: 1px solid black;\n    background: #373641;\n    padding: 16px;\n    padding-bottom: 5px;\n    font-size: 16px;\n\n    text-align: left;\n    color: #dedfe4;\n    text-transform: uppercase;\n    font-weight: 420;\n    letter-spacing: 1.5px;      \n\n    &:focus, &:hover{\n      outline: none;\n      background: #3d3d4a;\n    }\n  }\n\n  .company-name{\n    color: #898996;\n    text-transform: capitalize;\n  }\n"]);return g=function(){return e},e}var O=o.a.div(g()),y=function(e){var n=e.mySymbol,t=Object(r.useContext)(x).graphSymbol;return Object(a.jsx)("div",{children:Object(a.jsx)(O,{children:Object(a.jsx)("button",{className:"search-item",onClick:function(){return t(n.symbol,n.name,"day",!0)},children:Object(a.jsxs)("p",{children:["(",n.symbol,")",Object(a.jsxs)("span",{className:"company-name",children:[" ",n.name]})]})})})})};function v(){var e=Object(i.a)(["\n  position: absolute;\n  z-index:2;\n  width: 24%;\n\n"]);return v=function(){return e},e}var w=o.a.div(v()),S=function(){var e=Object(r.useState)(""),n=Object(l.a)(e,2),t=n[0],c=n[1],s=Object(r.useContext)(x),i=s.symbol_list,o=s.clearSearch;var d,u=Object(r.useRef)(null);return d=u,Object(r.useEffect)((function(){function e(e){d.current&&!d.current.contains(e.target)&&(c(""),o(t))}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[d]),i.length>0?Object(a.jsx)("div",{className:"col-4",ref:u,children:Object(a.jsx)(w,{children:i.map((function(e){return Object(a.jsx)(y,{mySymbol:e},e.symbol)}))})}):Object(a.jsx)(a.Fragment,{})};function k(){var e=Object(i.a)(["\n\n  .search {\n    &__container {\n        padding-top: 10px;\n        padding-right: 9%;\n    }\n    \n    &__title {\n        font-family: 'Lato', sans-serif; \n        font-size: 28px; \n        font-weight: 300; \n        text-align: center;\n        color: #dedfe4;\n\n        @media only screen and (max-width: 768px) {\n          padding: 0%;\n          font-size: 0%;\n        }\n    }\n    \n    &__input {\n        width: 100%;\n        padding: 2.5% 4%;\n\n        background-color: transparent;\n        transition: transform 250ms ease-in-out;\n        font-size: 12px;\n        line-height: 15px;\n        \n        color: #898996;\n        text-transform: uppercase;\n        font-weight: 520;\n        letter-spacing: 1.5px;\n        background-color: transparent;\n \n        background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\");\n        background-repeat: no-repeat;\n        background-size: 18px 18px;\n        background-position: 97% center;\n        border-radius: 50px;\n        border: 1px solid #4f4f62;\n        transition: all 250ms ease-in-out;\n        backface-visibility: hidden;\n        transform-style: preserve-3d;\n\n        @media only screen and (max-width: 768px) {\n          width: 200%;\n        }\n        \n        &::placeholder {\n            color: #898996;\n            text-transform: uppercase;\n            font-weight: 520;\n            letter-spacing: 1.5px;\n            @media only screen and (max-width: 768px) {\n              font-size: 0%;\n            }\n        }\n        \n        &:hover,\n        &:focus {\n            padding: 12px 0;\n            outline: 0;\n            border: 1px solid transparent;\n            border-bottom: 1px solid #4f4f62;\n            border-radius: 0;\n            background-position: 100% center;\n        }\n    }\n  }\n\n  .logo-img{\n    width: 115px;\n    padding: 12px 24px;\n    @media only screen and (max-width: 768px) {\n      width: 15%;\n      padding: 2%;\n    }\n  }\n\n  .credits{\n    padding-top: 10px;\n    padding-right: 2%;\n    font-size: 15px;\n    font-weight: 350;\n    text-align: center;\n    color: white;\n    @media only screen and (max-width: 768px) {\n      padding: 0 0 0 60%;\n      font-size: 80%;\n    }\n  }\n\n  background: #373641;\n\n"]);return k=function(){return e},e}var N=o.a.div(k()),_=function(){var e=Object(r.useState)(""),n=Object(l.a)(e,2),t=n[0],c=n[1],s=Object(r.useContext)(x).stockSearch;return Object(a.jsxs)(N,{children:[Object(a.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1",crossOrigin:"anonymous"}),Object(a.jsxs)("nav",{className:"navbar",children:[Object(a.jsx)("img",{className:"logo-img",src:"cs-chart.png",alt:""}),Object(a.jsx)("label",{className:"search__title",children:"PeakTrades"}),Object(a.jsxs)("div",{className:"col-4 center search__container",children:[Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={text:t};0!==n.text.length&&s(n)},children:[Object(a.jsx)("label",{className:"search__title",children:"Search Comapny:"}),Object(a.jsx)("input",{className:"search__input",type:"text",placeholder:"Search Tickers...",onChange:function(e){return c(e.target.value)}})]}),Object(a.jsx)(S,{})]}),Object(a.jsxs)("h6",{className:"credits",children:["by ",Object(a.jsx)("a",{className:"",href:"https://www.linkedin.com/in/benshiao",rel:"noreferrer",target:"_blank",children:"Benjamin Shiao"})]})]})]})},A=t(14);function T(){var e=Object(i.a)(["\n  \n    .trade-card{\n      margin-bottom: 10px;\n      font-size: 12px;\n      \n      display:block;\n      overflow:auto;\n\n      box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n      background: #3d3d4a;  \n    }\n    .trade-card-sub{\n      float: left;\n      width: 33.33%;\n      padding: 1.25%;    \n    }\n    .result-item{\n      border-bottom: 2px solid #6464a3;\n      height: auto;\n      margin-bottom: 4%;\n      padding-bottom: 1%;\n    }\n    .result-title{\n      text-align: left;\n      color: #898996;\n      font-size: 12px;\n      width: 40%;\n    }\n    .result-output{\n      text-align: right;\n      color: #dedfe4;\n      font-size: 14px;\n      width: 60%;\n    }\n  "]);return T=function(){return e},e}var D=function(e){var n=e.trade,t=o.a.div(T());return Object(a.jsx)(t,{children:Object(a.jsxs)("div",{className:"trade-card",children:[Object(a.jsxs)("div",{className:"trade-card-sub",children:[Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Buy date: "}),Object(a.jsx)("label",{className:"result-output",children:n.buyDate})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Buy price: "}),Object(a.jsx)("label",{className:"result-output",children:n.buyPrice})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Indicator at Buy: "}),Object(a.jsx)("label",{className:"result-output",children:n.indicatorAtBuy})]})]}),Object(a.jsxs)("div",{className:"trade-card-sub",children:[Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Sell date:"}),Object(a.jsx)("label",{className:"result-output",children:n.sellDate})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Sell price: "}),Object(a.jsx)("label",{className:"result-output",children:n.sellPrice})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Indicator at Sell: "}),Object(a.jsx)("label",{className:"result-output",children:n.indicatorAtSell})]})]}),Object(a.jsxs)("div",{className:"trade-card-sub",children:[Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Number of shares:"}),Object(a.jsxs)("label",{className:"result-output",children:[" ",n.numShares.toFixed(2)]})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Profit Percent: "}),Object(a.jsxs)("label",{className:"result-output",children:["$",n.profitUSD.toFixed(2),"(",n.profitPercent>0?"+":"",(100*n.profitPercent).toFixed(2),"%)"]})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:" Candle Length: "}),Object(a.jsx)("label",{className:"result-output",children:n.candleLength})]})]})]})})},C=function(e){var n=e.tradeList,t=0;return Object(a.jsx)(a.Fragment,{children:n.map((function(e){return Object(a.jsx)(D,{trade:e},t++)}))})};function B(){var e=Object(i.a)(["\n  background: #3d3d4a;\n  color: #898996;\n  display:flex;\n\n  padding: 1%;\n  margin: 0% 0% 1% 0%;\n\n  .settings{\n    font-size: 16px;\n    padding: 1%;\n    width: 25%;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n  }\n  .results-overview{\n    padding: 1%;\n    width: 24%;\n    font-size: 16px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n    margin: 0% 1%;\n  }\n  .list-of-trades{\n    padding:1%;\n    width: 50%;\n    font-size: 16px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n\n  }\n\n\n  h4{\n    font-size: 180%;\n    border-bottom: 4px solid #898996;\n  }\n\n\n\n  /* left card CSS begin */\n  .input-flex{\n    display:flex;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;//#eff1f2;\n    color: #dedfe4;\n    width: 75%;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    padding-top: 0.325rem;\n    padding-bottom: 0.325rem;\n    margin-bottom: 0.425rem;\n    \n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      ::placeholder{\n        color: #898996;\n      }\n      background: #dedfe4;\n    }\n    ::placeholder{\n      color: #dedfe4;\n    }\n  }\n\n  .input-inline{\n    display:inline;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;//#eff1f2;\n    color: #dedfe4;\n    width:10%;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    padding-top: 0.325rem;\n    padding-bottom: 0.325rem;\n    margin-bottom: 0.425rem;\n    \n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      ::placeholder{\n        color: #898996;\n      }\n      background: #dedfe4;\n    }\n    ::placeholder{\n      color: #dedfe4;\n    }\n  }\n\n  .input-label{\n    color: #898996;\n    font-size: 14px;\n  }\n\n  .input-label-sub{\n    color: #898996;\n    font-style: italic;\n    font-size: 80%;\n    padding-left: 5%;\n    margin-bottom: 2%;\n  }\n\n  .input-select {\n    display:flex;\n    width: 75%;\n    color: #dedfe4;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    margin-bottom: 0.425rem;\n\n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      background: #dedfe4;\n    }\n  }\n\n\n  .calc-button {\n    display: block;\n    cursor: pointer;\n    outline: none;\n    border: none;\n    background-color: #dedfe4;\n    width: 200px;\n    height: 35px;\n    border-radius: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #373641;\n    background-size: 100% 100%;\n    box-shadow: 0 0 0 1px black inset;\n    margin: 1%;\n    margin-top: 3%;\n\n    @media only screen and (max-width: 968px) {\n      width: auto;\n    }\n  }\n  \n  .calc-button:hover {\n    background-image: linear-gradient(\n      145deg,\n      transparent 10%,\n      #89d47f 10% 20%,\n      transparent 20% 30%,\n      #89d47f 30% 40%,\n      transparent 40% 50%,\n      #89d47f 50% 60%,\n      transparent 60% 70%,\n      #89d47f 70% 80%,\n      transparent 80% 90%,\n      #89d47f 90% 100%\n    );\n    animation: background 6s linear infinite;\n\n\n    @media only screen and (max-width: 968px) {\n      width: auto;\n      color: #52515c;\n      background-color: #ebebeb;\n      background-image: none;\n    }\n  }\n\n  .del-button {\n    display: block;\n    cursor: pointer;\n    outline: none;\n    border: none;\n    background-color: #dedfe4;\n    width: 200px;\n    height: 35px;\n    border-radius: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #373641;\n    background-size: 100% 100%;\n    box-shadow: 0 0 0 1px black inset;\n    margin: 1%;\n    \n    margin-top: 3%;@media only screen and (max-width: 968px) {\n      width: auto;\n    }\n  }\n  \n  .del-button:hover {\n    background-image: linear-gradient(\n      145deg,\n      transparent 10%,\n      #d4847f 10% 20%,\n      transparent 20% 30%,\n      #d4847f 30% 40%,\n      transparent 40% 50%,\n      #d4847f 50% 60%,\n      transparent 60% 70%,\n      #d4847f 70% 80%,\n      transparent 80% 90%,\n      #d4847f 90% 100%\n    );\n    animation: background 6s linear infinite;\n    @media only screen and (max-width: 968px) {\n      width: auto;\n      color: #52515c;\n      background-color: #ebebeb;\n      background-image: none;\n    }\n  }\n  \n  @keyframes background {\n    0% {\n      background-position: 0 0;\n    }\n    100% {\n      background-position: 400px 0;\n    }\n  }\n  /* left card CSS end */\n  /* middle card CSS begin */\n  .result-item{\n    border-bottom: 2px solid #6464a3;\n    height: auto;\n    margin-bottom: 4%;\n    padding-bottom: 1%;\n  }\n  .result-title{\n    text-align: left;\n    color: #898996;\n    font-size: 14px;\n    width: 50%;\n  }\n  .result-output{\n    text-align: right;\n    color: #dedfe4;\n    font-size: 16px;\n    width: 50%;\n  }\n\n  /* middle card CSS end */\n  /* right card CSS begin */\n  .trades-scroll{\n    font-size: 12px;\n    background-color: #373641;\n    padding: 1% 3%;\n    width:auto;\n    overflow-y:auto;\n    overflow-x:clip;\n    height: 750px;\n  }\n\n  /* right card CSS end */\n\n"]);return B=function(){return e},e}var P=o.a.div(B()),M=function(e){var n=e.backtest,t=function(){return(new Date).toISOString().slice(0,10)},c=function(){return new Date((new Date).setFullYear((new Date).getFullYear()-100)).toISOString().slice(0,10)},s=Object(r.useState)([]),i=Object(l.a)(s,2),o=i[0],d=i[1],u=Object(r.useState)("1. open"),h=Object(l.a)(u,2),j=h[0],m=h[1],f=Object(r.useState)(function(){switch(n.indicator){case"RSI":return 14;case"EMA":case"SMA":return 9;case"BB":return 20;default:return 24}}()),g=Object(l.a)(f,2),O=g[0],y=g[1],v=Object(r.useState)(2),w=Object(l.a)(v,2),S=w[0],k=w[1],N=Object(r.useState)(c()),_=Object(l.a)(N,2),T=_[0],D=_[1],B=Object(r.useState)(t()),M=Object(l.a)(B,2),I=M[0],z=M[1],E=Object(r.useState)(5),F=Object(l.a)(E,2),L=F[0],R=F[1],V=Object(r.useState)(1e4),U=Object(l.a)(V,2),H=U[0],Y=U[1],q=Object(r.useState)("usd"),J=Object(l.a)(q,2),K=J[0],X=J[1],$=Object(r.useState)(1500),Q=Object(l.a)($,2),G=Q[0],W=Q[1],Z=Object(r.useState)(function(){switch(n.indicator){case"RSI":return 30;case"EMA":case"SMA":case"BB":default:return-3}}()),ee=Object(l.a)(Z,2),ne=ee[0],te=ee[1],ae=Object(r.useState)("Real Middle Band"),re=Object(l.a)(ae,2),ce=re[0],se=re[1],ie=Object(r.useState)(1),le=Object(l.a)(ie,2),oe=le[0],de=le[1],ue=Object(r.useContext)(x),be=ue.deleteBacktest,pe=ue.current_symbol,he=ue.cache_TSDA,je=ue.cache_TSDA_function,me=function(e){return e.map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.name},e.name)}))};function xe(e,n,t,a){switch(e){case"numStocks":return a*n;case"percent":return t*(n/100);default:return n}}function fe(e,t,a){switch(n.indicator){case"RSI":return a<e;default:return t<=a*((100+e)/100)}}function ge(){switch(n.indicator){case"BBANDS":return ce;default:return n.indicator}}function Oe(e,t,a,r,c,s,i){var l=c/e["buy-price"],o=+(l-1)*e["volume-USD"],d=+r-e["candle-count-buy"];n.tradeListData.push({buyDate:t,sellDate:a,buyPrice:e["buy-price"],sellPrice:c,numShares:i,profitPercent:+l-1,profitUSD:o,candleLength:d,indicatorAtSell:s,indicatorAtBuy:e["indicator-at-buy"]}),n.numTrades++,n.profitUSD+=o,n.netBars+=d,n.netSellVolume+=c*i}function ye(){return(ye=Object(p.a)(b.a.mark((function e(t,a){var r,c,s,i,o,u,p,h,j,m,x,f,g,O,y,v,w,S,k,N,_,D,C,B,P,M;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe){e.next=3;break}return alert("Please select a stock to test your strategy on."),e.abrupt("return");case 3:if(he["Meta Data"]){e.next=15;break}return e.next=6,fetch("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=".concat(pe,"&outputsize=full&apikey=CQ5JZQYM4DG0OODA"));case 6:return s=e.sent,e.next=9,s.json();case 9:if(r=e.sent,je(r),!r.Note){e.next=13;break}return e.abrupt("return");case 13:e.next=16;break;case 15:r=he;case 16:e.t0=n.indicator,e.next="BBANDS"===e.t0?19:21;break;case 19:return i="&nbdevup=".concat(a.stdDeviation,"&nbdevdn=").concat(a.stdDeviation),e.abrupt("break",22);case 21:i="";case 22:return e.next=24,fetch("https://www.alphavantage.co/query?function=".concat(n.indicator,"&symbol=").concat(pe,"&interval=daily&time_period=").concat(t.timePeriod,"&series_type=").concat(t.seriesType).concat(i,"&apikey=CQ5JZQYM4DG0OODA"));case 24:return s=e.sent,e.next=27,s.json();case 27:if(!(c=e.sent).Note){e.next=31;break}return alert("MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day."),e.abrupt("return");case 31:o=0,(u={}).length=0,p=a.initalBalance,h=!1,j=0,m=Object(A.a)(Object.entries(c["Technical Analysis: ".concat(n.indicator)]).reverse()),e.prev=38,m.s();case 40:if((x=m.n()).done){e.next=60;break}if(f=Object(l.a)(x.value,1),(g=f[0])>=T&&(h=!0),!1!==h){e.next=47;break}return e.abrupt("continue",58);case 47:if(g!==I){e.next=49;break}return e.abrupt("break",60);case 49:if(o++,r["Time Series (Daily)"]["".concat(g)]){e.next=52;break}return e.abrupt("continue",58);case 52:if(O=+c["Technical Analysis: ".concat(n.indicator)]["".concat(g)]["".concat(ge())],y=+r["Time Series (Daily)"]["".concat(g)]["".concat(t.seriesType)],n.startPrice||(n.startPrice=y),n.endPrice=y,v=xe(a.initalBuyType,a.initalBuyAmount,p,y),u.length<a.maxBags&&v<=p&&fe(a.buyStrategyValue,y,O))u.length++,console.log("bag added"),u["".concat(g)]={"sell-price-limit":+(1+a.sellStrategyValue/100)*y,"buy-price":+y,"candle-count-buy":+o,"volume-USD":+v,"num-shares":+v/y,"indicator-at-buy":O},p-=u["".concat(g)]["volume-USD"],j=1===u.length?+u["".concat(g)]["sell-price-limit"]:Math.min(j,u["".concat(g)]["sell-price-limit"]);else if(y>=j&&u.length>0){for(w=g,S=0,k=Object.entries(u);S<k.length;S++)N=Object(l.a)(k[S],1),_=N[0],y>=u["".concat(_)]["sell-price-limit"]&&(Oe(u["".concat(_)],_,w,o,y,O,u["".concat(_)]["num-shares"],u["".concat(_)]["indicator-at-buy"]),delete u["".concat(_)],u.length--);if((D=Object.entries(u))[0][1]>0){j=u[D[1][0]]["sell-price-limit"],C=Object(A.a)(D);try{for(C.s();!(B=C.n()).done;)P=Object(l.a)(B.value,1),M=P[0],j=Math.min(j,+u["".concat(M)]["sell-price-limit"])}catch(b){C.e(b)}finally{C.f()}}}case 58:e.next=40;break;case 60:e.next=65;break;case 62:e.prev=62,e.t1=e.catch(38),m.e(e.t1);case 65:return e.prev=65,m.f(),e.finish(65);case 68:console.log("iterating done",n,T,I,n.holdReturn),n.holdReturn=(100*(n.endPrice/n.startPrice-1)).toFixed(2),console.log("set holdret",n.holdReturn,"end/start",n.endPrice,n.startPrice),delete n.startPrice,n.profitPercentOnBalance=n.profitUSD/a.initalBalance,n.profitPercentOnTrades=n.profitUSD/(n.netSellVolume-n.profitUSD),n.avgBars=n.netBars/n.numTrades,d(n.tradeListData);case 76:case"end":return e.stop()}}),e,null,[[38,62,65,68]])})))).apply(this,arguments)}var ve=function(){n.current_symbol=pe;var e={seriesType:j,timePeriod:+O,stdDeviation:+S},t={maxBags:+L,initalBalance:+H,initalBuyType:K,initalBuyAmount:+G,buyStrategyValue:+ne,buyStrategyType:ce,sellStrategyValue:+oe};t.maxBags<1||t.initalBalance<1||t.initalBuyAmount<1||t.sellStrategyValue<0||e.timePeriod<1?alert("Please enter valid inputs. Use positive integers for the following: Max bags, Sell percentage, Time period, Buy amount, Inital Balance."):"percent"===t.initalBuyType&&(t.initalBuyAmount<1||t.initalBuyAmount>100)?alert("Buy amount percentage must be 1-100%"):t.initalBuyAmount>t.initalBalance?alert("Inital buys must be less than or equal to inital balance."):"RSI"===n.indicator&&(t.buyStrategyValue<1||t.buyStrategyValue>99)?alert("RSI values must be between 1-99"):"BBANDS"===n.indicator&&e.stdDeviation<.5?alert("Standard Deviation must be greater than or equal to 0.5."):(console.log(t),n.tradeListData=[],n.profitUSD=0,n.numTrades=0,n.netBars=0,n.netSellVolume=0,function(e,n){ye.apply(this,arguments)}(e,t))},we=null;switch(n.indicator){case"RSI":we=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Time Period:"}),Object(a.jsx)("input",{className:"input-flex",placeholder:"14",onChange:function(e){return y(e.target.value)}})]});break;case"EMA":we=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Time Period: "}),Object(a.jsx)("input",{className:"input-flex",placeholder:"9",onChange:function(e){return y(e.target.value)}})]});break;case"SMA":we=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Time Period:"}),Object(a.jsx)("input",{className:"input-flex",placeholder:"9",onChange:function(e){return y(e.target.value)}})]});break;case"BBANDS":we=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Time Period: "}),Object(a.jsx)("input",{className:"input-flex",placeholder:"20",onChange:function(e){return y(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"Standard Deviation for upper/lower lines:"}),Object(a.jsx)("input",{className:"input-flex",placeholder:"2",onChange:function(e){return k(e.target.value)}})]});break;default:we=Object(a.jsx)("div",{children:"Default backtest indicator DOM"})}var Se=null;switch(n.indicator){case"RSI":Se=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Buy when RSI less than"}),Object(a.jsx)("input",{className:"input-inline",placeholder:"30",onChange:function(e){return te(e.target.value)}}),Object(a.jsx)("br",{})]});break;case"EMA":Se=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Buy at price"}),Object(a.jsx)("input",{className:"input-inline",placeholder:"-3",onChange:function(e){return te(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"% away from the EMA line. "}),Object(a.jsx)("label",{className:"input-label-sub",children:"(3 = 3% above, -3 = 3% below)"}),Object(a.jsx)("br",{})]});break;case"SMA":Se=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Buy at price"}),Object(a.jsx)("input",{className:"input-inline",placeholder:"-3",onChange:function(e){return te(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"% away from the SMA line. "}),Object(a.jsx)("label",{className:"input-label-sub",children:"(3 = 3% above, -3 = 3% below)"}),Object(a.jsx)("br",{})]});break;case"BBANDS":Se=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{className:"input-label",children:"Band to follow:"}),Object(a.jsx)("select",{className:"input-select",onChange:function(e){return se(e.target.value)},children:me([{name:"Middle",value:"Real Middle Band"},{name:"Upper",value:"Real Upper Band"},{name:"Lower",value:"Real Lower Band"}])}),Object(a.jsx)("label",{className:"input-label",children:"Buy at price"}),Object(a.jsx)("input",{className:"input-inline",placeholder:"-3",onChange:function(e){return te(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"% away from the selected line. "}),Object(a.jsx)("label",{className:"input-label-sub",children:"(3 = 3% above, -3 = 3% below)"}),Object(a.jsx)("br",{})]});break;default:Se=Object(a.jsx)("div",{children:"buy strat dom default"})}return Object(a.jsxs)(P,{children:[Object(a.jsxs)("div",{className:"settings",children:[Object(a.jsxs)("h4",{children:[n.indicator," Settings"]}),Object(a.jsx)("label",{className:"input-label",children:"Select Series Type:"}),Object(a.jsx)("select",{className:"input-select",onChange:function(e){return m(e.target.value)},children:me([{name:"open",value:"1. open"},{name:"close",value:"4. close"},{name:"high",value:"2. high"},{name:"low",value:"3. low"}])}),we,Object(a.jsx)("br",{}),Object(a.jsx)("h4",{children:"Trading Strategy Settings"}),Object(a.jsx)("label",{className:"input-label",children:"Start Date:"}),Object(a.jsx)("input",{className:"input-flex",type:"date",value:c(),onChange:function(e){return D(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"End Date:"}),Object(a.jsx)("input",{className:"input-flex",type:"date",value:t(),onChange:function(e){return z(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"Max number of bags:"}),Object(a.jsx)("input",{className:"input-flex",placeholder:"5",onChange:function(e){return R(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"Inital balance (USD):"}),Object(a.jsx)("input",{className:"input-flex",min:"0",placeholder:"10000",onChange:function(e){return Y(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"Inital buy type:"}),Object(a.jsx)("select",{className:"input-select",onChange:function(e){return X(e.target.value)},children:me([{name:"($) USD",value:"usd"},{name:"(%) Percent of Balance",value:"percent"},{name:"(#) Number of Stocks",value:"numStocks"}])}),Object(a.jsx)("label",{className:"input-label",children:"Inital buy amount:"}),Object(a.jsx)("input",{className:"input-flex",min:"0",placeholder:"1500",onChange:function(e){return W(e.target.value)}}),Se,Object(a.jsx)("label",{className:"input-label",children:"Sell bags at"}),Object(a.jsx)("input",{className:"input-inline",placeholder:"1",onChange:function(e){return de(e.target.value)}}),Object(a.jsx)("label",{className:"input-label",children:"% profit."}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{className:"calc-button",onClick:function(){return ve()},children:"Calculate"}),Object(a.jsx)("button",{className:"del-button",onClick:function(){return be(n.id)},children:"Delete"})]}),Object(a.jsxs)("div",{className:"results-overview",children:[Object(a.jsxs)("h4",{children:["Performance Overview ",n.current_symbol?"("+n.current_symbol+")":""]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Profit USD:"}),Object(a.jsxs)("label",{className:"result-output",children:["$",(n.profitUSD?n.profitUSD:0).toFixed(2)]})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Profit Percent on Entire Balance: "}),Object(a.jsxs)("label",{className:"result-output",children:[(n.profitPercentOnBalance?100*n.profitPercentOnBalance:0).toFixed(2),"%"]})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Average profit per trade: "}),Object(a.jsxs)("label",{className:"result-output",children:[" ",(n.profitPercentOnTrades?100*n.profitPercentOnTrades:0).toFixed(2),"%"]})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Number of trades: "}),Object(a.jsx)("label",{className:"result-output",children:n.numTrades?n.numTrades:0})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Average bars per trade: "}),Object(a.jsx)("label",{className:"result-output",children:(n.avgBars?n.avgBars:0).toFixed(2)})]}),Object(a.jsxs)("div",{className:"result-item",children:[Object(a.jsx)("label",{className:"result-title",children:"Buy and hold return: "}),Object(a.jsxs)("label",{className:"result-output",children:[n.holdReturn>0?"+":"",n.holdReturn?n.holdReturn:"0","%"]})]})]}),Object(a.jsxs)("div",{className:"list-of-trades",children:[Object(a.jsx)("h4",{children:"List Of Trades"}),Object(a.jsx)("div",{className:"trades-scroll",children:Object(a.jsx)(C,{tradeList:o.map((function(e){return e}))})})]})]})};function I(){var e=Object(i.a)(["\n\n\n  .main-box{\n    color: #898996;\n    display:flex;\n\n    padding: 5%;\n    margin: 5%;\n\n    .intro-text{  \n      padding-top: 10%;\n      width: 50%;\n      text-align: center;\n      p{\n        color: #898996;\n        font-size: 16px;\n      }\n      h4{\n        font-size: 180%;\n        color: #dedfe4;\n      }\n    }\n    .img-chart{\n      width: 65%;\n      transform: perspective(700px) rotateY(-10deg);\n      box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;\n    }\n    .img-backtest{\n      width: 65%;\n      transform: perspective(700px) rotateY(10deg);\n      box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;\n    }\n\n  }\n\n"]);return I=function(){return e},e}var z=o.a.div(I()),E=function(){return Object(a.jsxs)(z,{children:[Object(a.jsxs)("div",{className:"main-box",children:[Object(a.jsxs)("div",{className:"intro-text",children:[Object(a.jsx)("h4",{children:"PeakTrades"}),Object(a.jsxs)("p",{children:["Simple, yet powerful tool to visualize stock market data and test strategies for algorithm trading.",Object(a.jsx)("br",{}),"PeakTrades is a personal project developed by "," ",Object(a.jsx)("a",{className:"",href:"https://www.linkedin.com/in/benshiao",rel:"noreferrer",target:"_blank",children:"Benjamin Shiao"})," ","using React, Javascript, D3 graphs, and Alphavantage\u2019s stock API."]})]}),Object(a.jsx)("img",{className:"img-chart",src:"chart-img.png",alt:""})]}),Object(a.jsxs)("div",{className:"main-box",children:[Object(a.jsx)("img",{className:"img-backtest",src:"backtest-img.png",alt:""}),Object(a.jsxs)("div",{className:"intro-text",children:[Object(a.jsx)("h4",{children:"How Does it Work?"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("br",{}),"Search a US listed stock ticker and select a company to visualize their historic stock market data on an interactive candlestick chart.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Select a"," ",Object(a.jsx)("a",{className:"",href:"https://www.investopedia.com/terms/t/technicalindicator.asp",rel:"noreferrer",target:"_blank",children:"technical indicator"})," ","to create a customizable"," ",Object(a.jsx)("a",{className:"",href:"https://www.investopedia.com/terms/b/backtesting.asp",rel:"noreferrer",target:"_blank",children:"backtest"})," ","to visualize the results of your strategy.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Create multiple "," ",Object(a.jsx)("a",{className:"",href:"https://www.investopedia.com/terms/b/backtesting.asp",rel:"noreferrer",target:"_blank",children:"backtests"})," ","and compare your algorithms using different indicators across different stocks."]})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)("tpsan",{children:"."})})]})};function F(){var e=Object(i.a)(["\n  margin: 0% 3% 0% 3%;\n  padding: 1%;\n\n  background: #373641;\n  border-radius: 10px;\n\n  h3{\n    font-family: 'Lato', sans-serif; \n    font-size: 28px; \n    font-weight: 300; \n    text-align: left;\n    color: #dedfe4;\n  }\n\n"]);return F=function(){return e},e}var L=o.a.div(F()),R=function(){var e=Object(r.useContext)(x),n=e.backtests;return e.current_symbol.length>0?Object(a.jsxs)(a.Fragment,{children:[n.length>0?Object(a.jsxs)(L,{children:[Object(a.jsx)("h3",{children:"Strategy Tester"}),n.map((function(e){return Object(a.jsx)(M,{backtest:e},e.id)}))]}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(E,{})]}):Object(a.jsx)(E,{})},V=t(23),U=t.n(V);function H(){var e=Object(i.a)(["\n  margin: 3% 3% 0% 3%;\n  padding: 1%;\n\n  h3{\n    font-family: 'Lato', sans-serif; \n    font-size: 28px; \n    font-weight: 300; \n    text-align: left;\n    color: #dedfe4;\n  }\n  \n  .btn {\n    font-size: 80%;\n    font-family: 'Lato', sans-serif; \n    text-align: center;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    color: white;\n    width: 300px;\n    height: 70px;\n    padding: none;\n    margin: 1%;\n    padding: 0% 1%;\n    transition: all 0.3s;\n    span {\n      transition: all 0.3s;\n      tranform: scale(1, 1);\n    }\n  }\n    \n  .btn::before, .btn::after {\n    content: '';\n    position: absolute;\n    transition: all 0.3s;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  }\n\n  .btn-one::before {\n    left: 4px;\n    z-index: 1;\n    \n    opacity: 0;\n    background: rgba(255, 255, 255, 0.1);\n    transform: scale(0.1, 1);\n  }\n\n  .btn-one:hover::before {\n    opacity: 1;\n    transform: scale(1, 1);\n  }\n\n  .btn-one::after {\n    transition: all 0.3s;\n    border: 1px solid rgba(255, 255, 255, 0.5);\n  }\n\n  .btn-one:hover::after {\n    transform: scale(1, .1);\n    opacity: 0;\n  }\n  .btn-text{\n    color: #dedfe4;\n  }\n  .plus-icon{\n    filter: invert(1);\n    width: 8%;\n    vertical-align: -8%;\n    margin-right: 3%;\n  }\n\n  background: #373641;\n  border-radius: 10px;\n"]);return H=function(){return e},e}var Y=o.a.div(H()),q=function(){var e=Object(r.useContext)(x),n=e.addBacktest,t=e.current_symbol,c=function(e){var t={id:U()(),indicator:e};n(t)};return t.length>0?Object(a.jsxs)(Y,{children:[Object(a.jsx)("h3",{children:"Create a New Strategy"}),Object(a.jsxs)("button",{className:"btn btn-one",onClick:function(){return c("RSI")},children:[Object(a.jsx)("img",{className:"plus-icon",src:"https://img.icons8.com/android/24/000000/plus.png",alt:""}),Object(a.jsx)("tspan",{className:"",children:" "}),Object(a.jsx)("tspan",{className:"btn-text",children:"Relative Strength Index (RSI)"})]}),Object(a.jsxs)("button",{className:"btn btn-one",onClick:function(){return c("EMA")},children:[Object(a.jsx)("img",{className:"plus-icon",src:"https://img.icons8.com/android/24/000000/plus.png",alt:""}),Object(a.jsx)("tspan",{className:"btn-text",children:"Exponential Moving Average (EMA)"})]}),Object(a.jsxs)("button",{className:"btn btn-one",onClick:function(){return c("SMA")},children:[Object(a.jsx)("img",{className:"plus-icon",src:"https://img.icons8.com/android/24/000000/plus.png",alt:""}),Object(a.jsx)("tspan",{className:"btn-text",children:"Simple Moving Average (SMA)"})]}),Object(a.jsxs)("button",{className:"btn btn-one",onClick:function(){return c("BBANDS")},children:[Object(a.jsx)("img",{className:"plus-icon",src:"https://img.icons8.com/android/24/000000/plus.png",alt:""}),Object(a.jsx)("tspan",{className:"btn-text",children:"Bollinger Bands (BB)"})]})]}):Object(a.jsx)(a.Fragment,{})},J=t(8),K=t.n(J),X=function(e){var n=e.data,t=e.x,r=e.candle_width,c=e.pixelFor,s=n.close>n.open,i=c(s?n.close:n.open),l=c(s?n.open:n.close),o=l-i,d=c(n.high),u=c(n.low);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("rect",{x:t-r/2,y:i,width:r,height:n.open===n.close?1:Math.abs(o),className:K()({candle:!0,up:s,down:!s})}),Object(a.jsx)("line",{className:K()({wick:!0,top:!0,up:s,down:!s}),x1:t,y1:i,x2:t,y2:d}),Object(a.jsx)("line",{className:K()({wick:!0,bottom:!0,up:s,down:!s}),x1:t,y1:l,x2:t,y2:u})]})},$=function(e){var n=e.x,t=e.y,r=e.chart_dims;return n+t===0?Object(a.jsx)(a.Fragment,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("line",{x1:0,y1:t,x2:1.025*r.pixel_width,y2:t,className:K()({cross_hair:!0,horz:!0})}),Object(a.jsx)("line",{x1:n,y1:0,x2:n,y2:r.pixel_height,className:K()({cross_hair:!0,vert:!0})})]})};function Q(){var e=Object(i.a)(["\n  .caret{\n    font-size: 65%;\n  }\n\n  .priceChanges{\n    font-size: 80%;\n  }\n"]);return Q=function(){return e},e}var G=o.a.div(Q()),W=function(e){var n=e.data,t=e.graph_type,c=e.width,s=e.height,i=Object(r.useState)({x:-50,y:-50}),o=Object(l.a)(i,2),d=o[0],u=o[1],b=1.15*Math.max.apply(Math,n.map((function(e){return+e.high}))),p=.95*Math.min.apply(Math,n.map((function(e){return+e.low}))),h=Math.floor(c/n.length*.7),j={pixel_width:c,pixel_height:s,dollar_high:b,dollar_low:p,dollar_delta:b-p},m=function(e){var n=Math.abs(e-j.pixel_height)/j.pixel_height*j.dollar_delta+j.dollar_low;return e>0?n.toFixed(2):"-"},x=function(e){return e<=0||e>=j.pixel_width?"-":n[Math.floor(e/j.pixel_width*n.length)]},f=function(e){if(e<=0||e>=j.pixel_width)return"";var t=n[Math.floor(e/j.pixel_width*n.length)],a=100*(t.close/t.open-1);return(a>=0?"+":"-")+Math.abs(a).toFixed(2)},g=function(e){return-1*((e-j.dollar_low)/j.dollar_delta*j.pixel_height-j.pixel_height)},O=function(){switch(t){case"day":return"Yesterday";case"week":return"Past Week";case"month":return"Past Month";case"quarter":return"Past 3 Months";case"year":return"Past Year";default:return"Error chart.js"}};return Object(a.jsx)(G,{children:Object(a.jsxs)("svg",{width:1.025*c,height:s,className:"chart",onMouseMove:function(e){u({x:e.nativeEvent.x-Math.round(e.currentTarget.getBoundingClientRect().left)-h/2,y:e.nativeEvent.y-Math.round(e.currentTarget.getBoundingClientRect().top)})},onClick:function(e){console.log("Click at ".concat(e.nativeEvent.offsetX,", ").concat(e.nativeEvent.offsetY))},onMouseLeave:function(){u({x:-50,y:-50})},children:[n.map((function(e,t){var r=c/n.length*(t+1);return Object(a.jsx)(X,{data:e,x:r,candle_width:h,pixelFor:g},t)})),Object(a.jsx)($,{x:d.x+h/2,y:d.y,chart_dims:j}),d.x>0&&d.x<=c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("rect",{x:1.025*c-8.2*(1+m(d.y).length),y:d.y-12,width:8.2*(1+m(d.y).length),height:"24",fill:"gray",rx:"9",ry:"9"}),Object(a.jsxs)("text",{x:5+1.025*c-8*(1+m(d.y).length),y:d.y+5,fill:"white",fontSize:"12",children:["$",m(d.y)]}),Object(a.jsxs)("text",{x:"16",y:"20",fontSize:"12",children:[Object(a.jsx)("tspan",{fill:"#898996",children:"Open"})," ",Object(a.jsxs)("tspan",{fill:"#dedfe4",children:["$",x(d.x).open,"  "]}),Object(a.jsx)("tspan",{fill:"#898996",children:"High"})," ",Object(a.jsxs)("tspan",{fill:"#dedfe4",children:["$",x(d.x).high]})]}),Object(a.jsxs)("text",{x:"16",y:"40",fontSize:"12",children:[Object(a.jsx)("tspan",{fill:"#898996",children:"Close"})," ",Object(a.jsxs)("tspan",{fill:"#dedfe4",children:["$",x(d.x).close,"  "]}),Object(a.jsx)("tspan",{fill:"#898996",children:"Low"})," ",Object(a.jsxs)("tspan",{fill:"#dedfe4",children:["$",x(d.x).low]})]}),Object(a.jsxs)("text",{x:"16",y:"59",fontSize:"12",children:[Object(a.jsx)("tspan",{fill:"#898996",children:"Volume"})," ",Object(a.jsxs)("tspan",{fill:"#dedfe4",children:[d.x>0?(x(d.x).volume/1e3).toFixed(2)+"K":"","  "]}),Object(a.jsx)("tspan",{fill:"#898996",children:"Change"})," ",Object(a.jsxs)("tspan",{fill:f(d.x)>=0?"#81dfc4":"#d75b6d",children:[f(d.x),"%"]})]}),Object(a.jsx)("text",{x:"16",y:"85",fill:"#898996",fontSize:"20",children:function(e){if(!e)return"";var n=e.substring(2,4),t=parseInt(e.substring(5,7),10),a=parseInt(e.substring(8,10),10);return 10===e.length?t+"/"+a+"/"+n:t+"/"+a+"/"+n+" "+parseInt(e.substring(11,13),10)+":"+e.substring(14,16)+" EST"}(x(d.x).xAxis)})]}):Object(a.jsx)("text",{x:"16",y:"40",fontSize:"25",children:function(){if(n.length<3)return Object(a.jsx)(a.Fragment,{});var e=Object(a.jsx)("tspan",{fill:"#898996",children:O()}),t=100*(n[n.length-1].close/n[0].open-1),r=n[n.length-1].close-n[0].open;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("tspan",{className:"",fill:"#dedfe4",children:["$",n[n.length-1].close," "]}),Object(a.jsxs)("tspan",{className:"caret",fill:r>=0?"#81dfc4":"#d75b6d",children:[r>=0?"\u25b2":"\u25bc"," "]}),Object(a.jsxs)("tspan",{className:"priceChanges",fill:r>=0?"#81dfc4":"#d75b6d",children:[" $",Math.abs(r).toFixed(2)," (",t.toFixed(2),"%) "]}),e]})}()})]})})};t(34);function Z(){var e=Object(i.a)(["\n\n  .chart-info-area{\n    margin: 0 16% 0 16%;\n  }\n\n  .stock-info{\n    display: flex;\n    align-items: center;\n    width: 110.5%;\n    margin: 2% -5%;\n    padding: 20px 50px 0px 50px;\n    color: #dedfe4;\n    background-color: transparent;//#2e4033;\n    border-radius: 10px;\n    font-family: 'Source Sans Pro', arial, sans-serif;\n    font-size: 16px;\n    font-weight: 200;\n    box-shadow: rgba(0, 0, 0, 0.4) 0px 5px 15px;\n\n    \n    @media only screen and (max-width: 768px) {\n      padding: 2%;\n      font-size: 75%;\n    }\n\n    &-ticker{\n      text-align: left;\n      float: left;\n      width: 33.33333%;\n    }\n    &-company{\n      text-align: center;\n      float: left;\n      width: 33.33333%;\n    }\n    &-updated{\n      text-align: right;\n      float:left;\n      width: 33.33333%;\n    }\n  }\n\n  .chart-buttons{\n    margin: 5px 0 0 16%;\n  }\n  .chart-button{\n    color: #dedfe4;\n    font-size: 16px;\n    padding: 5px 15px;\n    background-color: transparent;\n    margin: 0 10px;\n    border: none;\n    border-radius: 10px;\n\n    &:hover,&:focus {\n        background: #101010;\n        outline: none;\n        box-shadow: rgba(0, 0, 0, 0.4) 0px 3px 10px;\n    }\n  }\n"]);return Z=function(){return e},e}var ee=o.a.div(Z());var ne=function(){var e=Object(r.useContext)(x),n=e.graphData_AV_API,t=e.graphSymbol,c=e.current_symbol,s=e.current_company,i=e.graph_type,o=function(){var e=Object(r.useState)({width:void 0,height:void 0}),n=Object(l.a)(e,2),t=n[0],a=n[1];return Object(r.useEffect)((function(){function e(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),d=2*o.width/3,u=2*o.height/3,b=function(){var e,t="Time Series (Daily)"===(e=n["Time Series (15min)"]?"Time Series (15min)":n["Time Series (60min)"]?"Time Series (60min)":"Time Series (Daily)"),a=1,r=[],c=0,s=0,l="",o=!1;for(var d in n[e]){if(l!==d.substr(0,10)){switch(l=d.substr(0,10),s++,i){case"day":s>1&&(o=!0);break;case"week":s>5&&(o=!0);break;case"month":s>20&&(o=!0);break;case"quarter":s>60&&(o=!0);break;case"year":s>253&&(o=!0)}if(o)break}var u=+n[e][d]["1. open"]===+n[e][d]["4. close"]?.001:0;r.push({time:c++,xAxis:d,open:(+n[e][d]["1. open"]/a).toFixed(2),close:(u+n[e][d]["4. close"]/a).toFixed(2),high:(+n[e][d]["2. high"]/a).toFixed(2),low:(+n[e][d]["3. low"]/a).toFixed(2),volume:+n[e][d][t?"6. volume":"5. volume"]}),t&&(a*=+n[e][d]["8. split coefficient"])}return r.reverse(),r},p=Object(r.useState)((function(){return b()})),h=Object(l.a)(p,2),j=h[0],m=h[1];Object(r.useEffect)((function(){c.length>0&&m(b())}),[i,c]);return c.length>0?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(ee,{children:[Object(a.jsxs)("div",{className:"chart-info-area",children:[Object(a.jsxs)("div",{className:"stock-info",children:[Object(a.jsxs)("p",{className:"stock-info-ticker",children:["Ticker: ",c]}),Object(a.jsxs)("p",{className:"stock-info-company",children:["Name: ",s]}),Object(a.jsxs)("p",{className:"stock-info-updated",children:["Updated: ",function(e){if(!e)return"error";var n=e.substring(2,4),t=parseInt(e.substring(5,7),10),a=parseInt(e.substring(8,10),10);return 10===e.length?t+"/"+a+"/"+n:t+"/"+a+"/"+n+" "+parseInt(e.substring(11,13),10)+":"+e.substring(14,16)+" EST"}(n["Meta Data"]["3. Last Refreshed"])]})]}),Object(a.jsx)(W,{data:j,graph_type:i,width:d,height:u})]}),Object(a.jsxs)("div",{className:"chart-buttons",children:[Object(a.jsx)("button",{className:"chart-button",onClick:function(){return t(c,s,"day",!1)},children:"1D"}),Object(a.jsx)("button",{className:"chart-button",onClick:function(){return t(c,s,"week",!1)},children:"1W"}),Object(a.jsx)("button",{className:"chart-button",onClick:function(){return t(c,s,"month",!1)},children:"1M"}),Object(a.jsx)("button",{className:"chart-button",onClick:function(){return t(c,s,"quarter",!1)},children:"3M"}),Object(a.jsx)("button",{className:"chart-button",onClick:function(){return t(c,s,"year",!1)},children:"1Y"})]})]})}):Object(a.jsx)(a.Fragment,{})};t(35);function te(){var e=Object(i.a)(["\n  // background: linear-gradient(-75deg, #9dc88d, #4d774e, #164a41);\n  // background-size: 100% 200%;\n\n  background: #3d3d4a;\n  }\n"]);return te=function(){return e},e}var ae=o.a.div(te());var re=function(){return Object(a.jsx)(f,{children:Object(a.jsxs)(ae,{children:[Object(a.jsx)(_,{}),Object(a.jsx)(ne,{}),Object(a.jsx)(q,{}),Object(a.jsx)(R,{})]})})};s.a.render(Object(a.jsx)(re,{}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.97f56b4f.chunk.js.map